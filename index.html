<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Organizador Semanal Evergreen 2D - 2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Quicksand', sans-serif;
            background-color: #f0fdf4;
            background-image: radial-gradient(#dcfce7 1px, transparent 1px);
            background-size: 20px 20px;
        }
        .card-shadow { box-shadow: 0 8px 0px rgba(0,0,0,0.05); }
        .calendar-btn { transition: all 0.2s ease; }
        .calendar-btn:hover { transform: scale(1.03); }
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .link-style { color: #2563eb; text-decoration: underline; }
        .past-day { opacity: 0.7; filter: grayscale(20%); }
        .holiday-card { background-color: #fef2f2 !important; border-color: #fecaca !important; }
        .day-card-content { min-height: 700px; }
    </style>
</head>
<body class="p-4 md:p-8">
    <div class="max-w-[95%] mx-auto bg-white rounded-[40px] shadow-2xl overflow-hidden border-8 border-white relative">
        
        <!-- CABECERA -->
        <div class="bg-emerald-500 p-6 text-white relative overflow-hidden">
            <div class="absolute top-2 left-4 text-4xl opacity-50">üåø</div>
            <div class="text-center">
                <h1 class="text-4xl md:text-5xl font-extrabold tracking-widest uppercase mb-2">School Timetable 2D</h1>
                <p id="week-label" class="text-xl font-bold bg-white text-emerald-600 inline-block px-6 py-1 rounded-full uppercase shadow-sm">Febrero 2026</p>
            </div>
            <button onclick="toggleWeekView()" id="nav-btn" class="absolute top-6 right-6 bg-white text-emerald-600 hover:bg-emerald-50 font-bold py-2 px-6 rounded-2xl shadow-lg transition-all transform hover:scale-105 flex items-center gap-2 z-20 border-2 border-emerald-100">
                <span id="btn-text">Ver Pr√≥xima Semana</span>
                <span id="btn-icon">‚û°Ô∏è</span>
            </button>
        </div>

        <!-- CONTENEDOR PRINCIPAL -->
        <div id="main-content" class="p-6 bg-emerald-50">
            <div id="grid-container" class="grid grid-cols-1 md:grid-cols-5 gap-4 fade-in">
                <!-- Inyectado por JS -->
            </div>
        </div>

        <!-- FOOTER DUAL (CUMPLEA√ëOS Y PR√ÅCTICA) -->
        <div class="bg-white p-5 border-t-2 border-dashed border-gray-200 grid grid-cols-1 md:grid-cols-2 gap-4">
            <!-- Columna Cumplea√±os -->
            <div class="flex items-center gap-3">
                <div class="bg-emerald-100 p-2 rounded-full text-2xl">ü•≥</div>
                <div>
                    <p class="font-bold text-gray-800 text-xs uppercase">Pr√≥ximos Cumplea√±os:</p>
                    <p id="birthday-footer" class="text-[10px] text-gray-500 italic">Mart√≠n Chac√≥n (Feb 07) - Celebraci√≥n Feb 09</p>
                </div>
            </div>
            <!-- Columna Pr√°ctica Espa√±ol -->
            <div class="flex items-center gap-3 md:border-l md:pl-6 border-gray-100">
                <div class="bg-blue-100 p-2 rounded-full text-2xl">üìö</div>
                <div>
                    <p class="font-bold text-gray-800 text-xs uppercase">Recursos de Pr√°ctica (Espa√±ol):</p>
                    <a href="https://wordwall.net/es/resource/32706393" target="_blank" class="text-[10px] link-style font-bold">Juego Wordwall: Sin√≥nimos</a>
                </div>
            </div>
        </div>

        <div class="bg-emerald-50 text-emerald-700 px-4 py-2 text-center text-[10px] font-bold border-t border-emerald-100 uppercase">
            ‚öôÔ∏è Calendario Escolar 2026 | Visualizaci√≥n de Tareas Espec√≠ficas
        </div>
    </div>

    <script>
        // --- CONFIGURACI√ìN PARA 2026 ---
        const REFERENCE_DATE = new Date(2026, 1, 9); 
        const REFERENCE_DAY_NUMBER = 4; 

        const specialActivities = {
            "2026-02-09": {
                html: `
                    <div class="bg-blue-100 border-2 border-blue-200 p-3 rounded-xl mb-2">
                        <p class="text-[11px] text-blue-800 font-extrabold uppercase">üéÇ CUMPLEA√ëOS:</p>
                        <p class="text-[10px] text-blue-700 font-bold">Mart√≠n Chac√≥n (Feb 07)</p>
                        <p class="text-[9px] text-blue-600 italic font-black mt-1">¬°Felicitar hoy en el sal√≥n!</p>
                    </div>
                `,
                reminder: "üéÇ CUMPLEA√ëOS: Mart√≠n Chac√≥n (Siguiente d√≠a h√°bil). ¬°Felicitar hoy!"
            },
            "2026-02-11": {
                html: `
                    <div class="bg-orange-100 p-3 rounded-xl border-2 border-orange-200">
                        <p class="text-[10px] text-orange-800 font-black uppercase mb-2">üöÄ TAREA DE RECICLAJE:</p>
                        <div class="text-[9px] text-gray-900 space-y-1.5 leading-tight font-bold">
                            <p>üìÑ <span class="text-orange-900">Papel:</span> Usado, cartulina o peri√≥dico.</p>
                            <p>ü•§ <span class="text-orange-900">Pl√°stico:</span> Envoltorios o bolsas.</p>
                            <p>üñáÔ∏è <span class="text-orange-900">Metal:</span> Aluminio o met√°lico.</p>
                            <div class="mt-3 border-t border-orange-200 pt-2">
                                <p class="text-[8px] text-red-600 uppercase font-black">‚ö†Ô∏è REGLAS:</p>
                                <p class="text-[8px] text-gray-700">2-4 piezas c/u ‚Ä¢ LIMPIOS ‚Ä¢ 5x5 cm aprox.</p>
                            </div>
                        </div>
                    </div>
                `,
                reminder: "üöÄ TAREA RECICLAJE:\n- Papel: Usado/Cartulina/Peri√≥dico.\n- Pl√°stico: Envoltorios/Bolsas.\n- Metal: Aluminio/Met√°lico.\n\n‚ö†Ô∏è REGLAS: 2-4 piezas c/u, LIMPIOS, tama√±o 5x5 cm."
            }
        };

        const schedules = {
            1: "<li>‚Ä¢ Danza</li><li>‚Ä¢ Psicomotricidad</li><li>‚Ä¢ Espa√±ol</li><li>‚Ä¢ Artes</li><li>‚Ä¢ Math</li><li>‚Ä¢ English</li>",
            2: "<li>‚Ä¢ STEAM</li><li>‚Ä¢ Social</li><li>‚Ä¢ Science</li><li>‚Ä¢ Espa√±ol</li><li>‚Ä¢ English</li><li>‚Ä¢ Phonics</li><li>‚Ä¢ Math</li>",
            3: "<li>‚Ä¢ P.E.</li><li>‚Ä¢ Art</li><li>‚Ä¢ Math</li><li>‚Ä¢ English</li><li>‚Ä¢ Science</li><li>‚Ä¢ Espa√±ol</li>",
            4: "<li>‚Ä¢ Perfil</li><li>‚Ä¢ Science</li><li>‚Ä¢ Math</li><li>‚Ä¢ English</li><li>‚Ä¢ Teatro</li><li>‚Ä¢ Espa√±ol</li>",
            5: "<li>‚Ä¢ Math</li><li>‚Ä¢ Espa√±ol</li><li>‚Ä¢ English</li><li>‚Ä¢ Social</li><li>‚Ä¢ Phonics</li>",
            6: "<li>‚Ä¢ Science</li><li>‚Ä¢ English</li><li>‚Ä¢ Espa√±ol</li><li>‚Ä¢ Math</li><li>‚Ä¢ Social</li><li>‚Ä¢ Phonics</li>"
        };

        let viewOffset = 0; 

        function getCycleDay(targetDate) {
            const day = targetDate.getDay();
            if (day === 0 || day === 6) return null;
            let weekdaysCount = 0;
            let temp = new Date(REFERENCE_DATE);
            if (targetDate >= REFERENCE_DATE) {
                while (temp < targetDate) {
                    temp.setDate(temp.getDate() + 1);
                    if (temp.getDay() !== 0 && temp.getDay() !== 6) weekdaysCount++;
                }
                return ((REFERENCE_DAY_NUMBER - 1 + weekdaysCount) % 6) + 1;
            } else {
                while (temp > targetDate) {
                    if (temp.getDay() !== 0 && temp.getDay() !== 6) weekdaysCount--;
                    temp.setDate(temp.getDate() - 1);
                }
                let result = (REFERENCE_DAY_NUMBER + weekdaysCount) % 6;
                return result <= 0 ? result + 6 : result;
            }
        }

        function getStartOfWeek(date) {
            const temp = new Date(date);
            const day = temp.getDay();
            const diff = temp.getDate() - day + (day === 0 ? -6 : 1); 
            return new Date(temp.setDate(diff));
        }

        function renderCalendar() {
            const container = document.getElementById('grid-container');
            container.innerHTML = '';
            const today = new Date();
            today.setHours(0,0,0,0);

            let startDay = getStartOfWeek(new Date(2026, 1, 9)); 
            startDay.setDate(startDay.getDate() + (viewOffset * 7));

            const options = { month: 'short', day: 'numeric' };
            const endDay = new Date(startDay);
            endDay.setDate(endDay.getDate() + 4);
            
            document.getElementById('week-label').innerText = 
                `${viewOffset === 0 ? 'Semana Actual' : 'Pr√≥xima Semana'} (${startDay.toLocaleDateString('es-ES', options)} - ${endDay.toLocaleDateString('es-ES', options)})`;

            const dayNames = ["Lunes", "Martes", "Mi√©rcoles", "Jueves", "Viernes"];
            const colors = ["bg-blue-500", "bg-yellow-400", "bg-pink-400", "bg-sky-400", "bg-orange-400"];

            for (let i = 0; i < 5; i++) {
                const currentDate = new Date(startDay);
                currentDate.setDate(startDay.getDate() + i);
                currentDate.setHours(0,0,0,0);
                const dateISO = currentDate.toISOString().split('T')[0];
                const dayName = dayNames[i];
                const colorClass = colors[i];
                const isPast = currentDate < today;
                const numDiaCiclo = getCycleDay(currentDate);

                const activityData = specialActivities[dateISO];
                const activityHtml = activityData ? activityData.html : `<p class="text-[9px] text-gray-400 italic font-semibold">Sin tareas especiales</p>`;
                const reminderText = activityData ? activityData.reminder : "Sin tareas especiales.";

                const cardHTML = `
                    <div class="flex flex-col h-full ${isPast ? 'past-day' : ''}">
                        <div class="${colorClass} text-white p-3 text-center rounded-t-3xl font-bold uppercase text-lg">
                            ${dayName} ${currentDate.getDate()}
                        </div>
                        <div class="bg-white p-4 flex-grow border-x-4 border-b-4 ${colorClass.replace('bg-', 'border-')} rounded-b-3xl card-shadow flex flex-col day-card-content">
                            
                            <div class="mb-3">
                                <span class="bg-gray-100 text-gray-700 text-[10px] font-bold px-2 py-0.5 rounded uppercase">D√≠a ${numDiaCiclo}</span>
                            </div>

                            <div class="mb-4">
                                <p class="font-bold text-gray-700 text-xs mb-0.5">üëî Uniforme:</p>
                                <p class="${colorClass.replace('bg-', 'text-')} font-bold text-sm uppercase italic leading-tight">
                                    ${getUniform(dayName)}
                                </p>
                            </div>

                            <div class="bg-orange-50 p-3 rounded-2xl border-2 border-orange-100 mb-4 min-h-[200px]">
                                <p class="font-bold text-orange-700 text-[9px] mb-1 uppercase tracking-tighter">üöÄ Actividades / Tareas:</p>
                                ${activityHtml}
                            </div>

                            <div class="mb-3 flex-grow">
                                <p class="font-bold text-gray-400 text-[10px] uppercase mb-1 tracking-wider">üìö Horario</p>
                                <ul class="text-[11px] text-gray-700 space-y-1 font-medium">
                                    ${schedules[numDiaCiclo] || '<li>Cargando horario...</li>'}
                                </ul>
                            </div>

                            <button onclick="handleCalendar('${dayName}', '${getUniform(dayName)}', '${encodeURIComponent(reminderText)}')" class="calendar-btn mt-4 w-full bg-emerald-500 text-white py-3 rounded-xl text-[10px] font-black shadow-md uppercase tracking-widest border-b-4 border-emerald-700">üìÖ AGENDAR D√çA ${numDiaCiclo}</button>
                        </div>
                    </div>
                `;
                container.insertAdjacentHTML('beforeend', cardHTML);
            }
        }

        function getUniform(dayName) {
            if (dayName === "Martes" || dayName === "Jueves") return "Sudadera";
            if (dayName === "Mi√©rcoles") return "Diario (C)";
            return "Diario üëû";
        }

        function toggleWeekView() {
            viewOffset = viewOffset === 0 ? 1 : 0;
            document.getElementById('btn-text').innerText = viewOffset === 0 ? "Ver Pr√≥xima Semana" : "Volver a Actual";
            renderCalendar();
        }

        window.handleCalendar = function(dayName, uniform, activityText) {
            const decodedActivity = decodeURIComponent(activityText);
            const title = encodeURIComponent(`COLEGIO 2D: ${dayName}`);
            const body = encodeURIComponent(`üëî UNIFORME: ${uniform}\n\nüìù TAREAS:\n${decodedActivity}`);
            window.open(`https://www.google.com/calendar/render?action=TEMPLATE&text=${title}&details=${body}`, '_blank');
        };

        document.addEventListener('DOMContentLoaded', renderCalendar);
    </script>
</body>
</html>
